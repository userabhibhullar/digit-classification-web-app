import matplotlib.pyplot as plt
from helper.imageprocessing import ImageProcessor
from models.mnist import MNIST
import numpy as np

base64_data = b'/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABAAEADAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6ACgAoAKACgAoAKACgAoAyfFninQvA3hXWfGvim++xaL4f0+41TUbnynk8i1gjaSWTYgZ22ojHCgscYAJ4oAPCfinQvHPhXRvGvha++26L4g0+31TTrnynj8+1njWSKTY4V13I6nDAMM4IB4oA1qAMnUfFnhXR9d0jwtq3ibSrLWvEH2j+yNOuL2OO61DyEDz/Z4mIeXy0IZ9gO1SCcCgDWoAKACgAoA5/4heCtK+JXgHxL8OdduLuDTfFWj3uiXkto6rPHBcwvDI0bMrKHCuSCVYZxkHpQB8//APBMvVtV1r9hz4YXms6nd39xHb6laJLczNK6wQandQwxAsSQkcUccaL0VEVRgACgD6goA+AP+Cm3xI174F/GX9mP482dnqo0Xwj4g1iLWLuysUnxa3K2ST2oMuIhNPaJerGGZWOx2VlKFlAPv+gAoAKACgAoA+Vf+CXH/Jifwy/7jX/p4vaAPqqgD4A/4LV/8mseFv8AsoFj/wCm7UaAPv8AoAKACgAoAKAPgD4K/ss/8FHPhf4E8F/BTQP2gfhV4B8GeF/7R87U9C0mXWtUuvtM0lyvmw39ssT7ZpCq+W8GEkYt5hVRQB1X/DtD/hLfAn/CHfGv9sj9oDxr9r/5CcP/AAlHlaXd7ZvMh/0K5W5xs2xH5pH+dN428KoB5V+15+wV+yd8L/8AhSv/AAgvwp/sz/hLfjB4c8Lax/xPdSm+1aXdef58H724bZu8tPnTa4xwwyaAP0qoAKACgAoAKACgAoA+f/2vPhb47+KH/Clf+EF0L+0/+ES+MHhzxTrH+lQw/ZdLtfP8+f8Aeuu/b5ifIm5znhTg0AfQFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAH//Z'

image = ImageProcessor(base64_data)

image = image.prepareImage()

mnist_model = MNIST()

predictions = mnist_model.identify(image)

print(predictions)

plt.imshow(image[0], cmap='gray')
plt.show()